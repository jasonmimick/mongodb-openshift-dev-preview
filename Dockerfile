FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.spec"=\
"YWdlbnRzb25seTogJmFnZW50c29ubHkKICAtIG5hbWU6IG1tc19iYXNlX3VybAogICAgdGl0bGU6\
IE9wcyBNYW5hZ2VyIFVSTAogICAgdHlwZTogc3RyaW5nCiAgICByZXF1aXJlZDogVHJ1ZQogICAg\
ZGVmYXVsdDogJ2h0dHA6Ly9qYXNvbnNtYWNib29rNTUubGFuOjgwODAnCiAgICBkaXNwbGF5X2dy\
b3VwOiBNb25nb0RCIE9wcyBNYW5hZ2VyIENvbmZpZ3VyYXRpb24KICAtIG5hbWU6IG1tc191c2Vy\
CiAgICB0aXRsZTogT3BzIE1hbmFnZXIgdXNlcgogICAgdHlwZTogc3RyaW5nCiAgICByZXF1aXJl\
ZDogVHJ1ZQogICAgZGVmYXVsdDogamFzb24ubWltaWNrQG1vbmdvZGIuY29tCiAgICBkaXNwbGF5\
X2dyb3VwOiBNb25nb0RCIE9wcyBNYW5hZ2VyIENvbmZpZ3VyYXRpb24KICAtIG5hbWU6IG1tc191\
c2VyX2FwaWtleQogICAgdGl0bGU6IFVzZXIncyBPcHMgTWFuYWdlciBBUEkga2V5CiAgICB0eXBl\
OiBzdHJpbmcKICAgIHJlcXVpcmVkOiBUcnVlCiAgICBkZWZhdWx0OiAiZTZlNmFiOTctMTQzNC00\
YTc2LThiN2YtODVjYTQzZTZkMTU2IgogICAgZGlzcGxheV90eXBlOiBzdHJpbmcKICAgIGRpc3Bs\
YXlfZ3JvdXA6IE1vbmdvREIgT3BzIE1hbmFnZXIgQ29uZmlndXJhdGlvbgogIC0gbmFtZTogbW1z\
X3Byb2plY3RfbmFtZQogICAgdGl0bGU6IFByb2plY3QgdG8gY3JlYXRlIHJlcGxpY2Egc2V0IGlu\
CiAgICBkZWZhdWx0OiAiIgogICAgdHlwZTogc3RyaW5nCiAgICBkaXNwbGF5X2dyb3VwOiBNb25n\
b0RCIE9wcyBNYW5hZ2VyIENvbmZpZ3VyYXRpb24KICAtIG5hbWU6IG1tc19kZWZhdWx0X29yZ0lk\
CiAgICB0aXRsZTogT3JnYW5pemF0aW9uIGZvciBuZXcgcHJvamVjdAogICAgZGVmYXVsdDogIjVh\
YTdiZGRjNmNlZjQ3NjlkMWY0YTY0YyIKICAgIHR5cGU6IHN0cmluZwogICAgZGlzcGxheV9ncm91\
cDogTW9uZ29EQiBPcHMgTWFuYWdlciBDb25maWd1cmF0aW9uCiAgLSBuYW1lOiBtbXNfYXBpX3Rp\
bWVvdXQKICAgIHRpdGxlOiBNb25nb0RCIE9wcyBNYW5hZ2VyIEFQSSBUaW1lb3V0IGluIHNlY29u\
ZHMKICAgIGRlZmF1bHQ6ICIzMCIKICAgIHR5cGU6IHN0cmluZwogICAgZGlzcGxheV9ncm91cDog\
TW9uZ29EQiBPcHMgTWFuYWdlciBDb25maWd1cmF0aW9uCiAgLSBuYW1lOiBjbHVzdGVyX25hbWUK\
ICAgIHRpdGxlOiBNb25nb0RCIENsdXN0ZXIgTmFtZQogICAgdHlwZTogc3RyaW5nCiAgICBkZWZh\
dWx0OiAKICAgIHJlcXVpcmVkOiBUcnVlCiAgICBkaXNwbGF5X2dyb3VwOiBNb25nb0RCIENsdXN0\
ZXIgQ29uZmlndXJhdGlvbgogIC0gbmFtZTogbW9uZ29kYl92ZXJzaW9uCiAgICB0aXRsZTogTW9u\
Z29EQiBWZXJzaW9uCiAgICB0eXBlOiBlbnVtCiAgICBkZWZhdWx0OiAnMy40LjEzJwogICAgZW51\
bTogWyAnMy40LjEzJywgJzMuNi4zJyBdCiAgICByZXF1aXJlZDogVHJ1ZQogICAgZGlzcGxheV9n\
cm91cDogTW9uZ29EQiBDbHVzdGVyIENvbmZpZ3VyYXRpb24KICAtIG5hbWU6IG1vbmdvZGJfZGJw\
YXRoCiAgICB0aXRsZTogUGF0aCBmb3IgZGF0YSBmaWxlcwogICAgdHlwZTogc3RyaW5nCiAgICBk\
ZWZhdWx0OiAiL2RhdGEiCiAgICByZXF1aXJlZDogVHJ1ZQogICAgZGlzcGxheV9ncm91cDogTW9u\
Z29EQiBDbHVzdGVyIENvbmZpZ3VyYXRpb24KICAtIG5hbWU6IG1vbmdvZGJfbG9ncGF0aAogICAg\
dGl0bGU6IEZ1bGwgcGF0aCBhbmQgbmFtZSBvZiBkYXRhYmFzZSBsb2dmaWxlCiAgICB0eXBlOiBz\
dHJpbmcKICAgIGRlZmF1bHQ6ICIvZGF0YS9tb25nb2RiLmxvZyIKICAgIHJlcXVpcmVkOiBUcnVl\
CiAgICBkaXNwbGF5X2dyb3VwOiBNb25nb0RCIENsdXN0ZXIgQ29uZmlndXJhdGlvbgogIC0gbmFt\
ZTogbW9uZ29kYl9wb3J0IAogICAgdGl0bGU6IFBvcnQgZm9yIE1vbmdvREIgdG8gbGlzdGVuIG9u\
CiAgICB0eXBlOiBzdHJpbmcKICAgIGRlZmF1bHQ6ICIyNzAwMCIKICAgIHJlcXVpcmVkOiBUcnVl\
CiAgICBkaXNwbGF5X2dyb3VwOiBNb25nb0RCIENsdXN0ZXIgQ29uZmlndXJhdGlvbgogIC0gbmFt\
ZTogZGlza19zaXplX2diCiAgICB0aXRsZTogU2l6ZSBpbiBHYiBmb3IgcGVyc2lzdGVudCBzdG9y\
YWdlIGNsYWltIG9uIGRhdGEgbm9kZQogICAgZGVmYXVsdDogIjUiCiAgICB0eXBlOiBzdHJpbmcK\
ICAgIGRpc3BsYXlfZ3JvdXA6IE1vbmdvREIgQ2x1c3RlciBDb25maWd1cmF0aW9uCiAgLSBuYW1l\
OiBudW1iZXJfcG9kc19hYQogICAgdGl0bGU6IE51bWJlciBvZiBhZ2VudHMtb25seSBwb2RzCiAg\
ICB0eXBlOiBzdHJpbmcKICAgIGRlZmF1bHQ6ICIxMyIKICAgIHJlcXVpcmVkOiBUcnVlCiAgICBk\
aXNwbGF5X2dyb3VwOiBNb25nb0RCIEFnZW50cyBPbmx5IFBvZHMgQ29uZmlndXJhdGlvbgoKcmVw\
bGljYXNldDogJnJlcGxpY2FzZXQKICAtIG5hbWU6IG1tc19iYXNlX3VybAogICAgdGl0bGU6IE9w\
cyBNYW5hZ2VyIFVSTAogICAgdHlwZTogc3RyaW5nCiAgICByZXF1aXJlZDogVHJ1ZQogICAgZGVm\
YXVsdDogJ2h0dHA6Ly9qYXNvbnNtYWNib29rNTVsb2NhbC5sb2NhbDo4MDgwJwogICAgZGlzcGxh\
eV9ncm91cDogTW9uZ29EQiBPcHMgTWFuYWdlciBDb25maWd1cmF0aW9uCiAgLSBuYW1lOiBtbXNf\
dXNlcgogICAgdGl0bGU6IE9wcyBNYW5hZ2VyIHVzZXIKICAgIHR5cGU6IHN0cmluZwogICAgcmVx\
dWlyZWQ6IFRydWUKICAgIGRlZmF1bHQ6IGphc29uLm1pbWlja0Btb25nb2RiLmNvbQogICAgZGlz\
cGxheV9ncm91cDogTW9uZ29EQiBPcHMgTWFuYWdlciBDb25maWd1cmF0aW9uCiAgLSBuYW1lOiBt\
bXNfdXNlcl9hcGlrZXkKICAgIHRpdGxlOiBVc2VyJ3MgT3BzIE1hbmFnZXIgQVBJIGtleQogICAg\
dHlwZTogc3RyaW5nCiAgICByZXF1aXJlZDogVHJ1ZQogICAgZGVmYXVsdDogImU2ZTZhYjk3LTE0\
MzQtNGE3Ni04YjdmLTg1Y2E0M2U2ZDE1NiIKICAgIGRpc3BsYXlfdHlwZTogc3RyaW5nCiAgICBk\
aXNwbGF5X2dyb3VwOiBNb25nb0RCIE9wcyBNYW5hZ2VyIENvbmZpZ3VyYXRpb24KICAtIG5hbWU6\
IG1tc19wcm9qZWN0X25hbWUKICAgIHRpdGxlOiBQcm9qZWN0IHRvIGNyZWF0ZSByZXBsaWNhIHNl\
dCBpbgogICAgZGVmYXVsdDogIiIKICAgIHR5cGU6IHN0cmluZwogIC0gbmFtZTogbW1zX2RlZmF1\
bHRfb3JnSWQKICAgIHRpdGxlOiBPcmdhbml6YXRpb24gZm9yIG5ldyBwcm9qZWN0CiAgICBkZWZh\
dWx0OiAiNWFhN2JkZGM2Y2VmNDc2OWQxZjRhNjRjIgogICAgdHlwZTogc3RyaW5nCiAgICBkaXNw\
bGF5X2dyb3VwOiBNb25nb0RCIE9wcyBNYW5hZ2VyIENvbmZpZ3VyYXRpb24KICAtIG5hbWU6IG1t\
c19hcGlfdGltZW91dAogICAgdGl0bGU6IE1vbmdvREIgT3BzIE1hbmFnZXIgQVBJIFRpbWVvdXQg\
aW4gc2Vjb25kcwogICAgZGVmYXVsdDogIjMwIgogICAgdHlwZTogc3RyaW5nCiAgICBkaXNwbGF5\
X2dyb3VwOiBNb25nb0RCIE9wcyBNYW5hZ2VyIENvbmZpZ3VyYXRpb24KICAtIG5hbWU6IGNsdXN0\
ZXJfbmFtZQogICAgdGl0bGU6IE1vbmdvREIgQ2x1c3RlciBOYW1lCiAgICB0eXBlOiBzdHJpbmcK\
ICAgIGRlZmF1bHQ6IAogICAgcmVxdWlyZWQ6IFRydWUKICAgIGRpc3BsYXlfZ3JvdXA6IE1vbmdv\
REIgQ2x1c3RlciBDb25maWd1cmF0aW9uCiAgLSBuYW1lOiBtb25nb2RiX3ZlcnNpb24KICAgIHRp\
dGxlOiBNb25nb0RCIFZlcnNpb24KICAgIHR5cGU6IGVudW0KICAgIGRlZmF1bHQ6ICczLjQuMTMn\
CiAgICBlbnVtOiBbICczLjQuMTMnLCAnMy42LjMnIF0KICAgIHJlcXVpcmVkOiBUcnVlCiAgICBk\
aXNwbGF5X2dyb3VwOiBNb25nb0RCIENsdXN0ZXIgQ29uZmlndXJhdGlvbgogIC0gbmFtZTogbW9u\
Z29kYl9kYnBhdGgKICAgIHRpdGxlOiBQYXRoIGZvciBkYXRhIGZpbGVzCiAgICB0eXBlOiBzdHJp\
bmcKICAgIGRlZmF1bHQ6ICIvZGF0YSIKICAgIHJlcXVpcmVkOiBUcnVlCiAgICBkaXNwbGF5X2dy\
b3VwOiBNb25nb0RCIENsdXN0ZXIgQ29uZmlndXJhdGlvbgogIC0gbmFtZTogbW9uZ29kYl9sb2dw\
YXRoCiAgICB0aXRsZTogRnVsbCBwYXRoIGFuZCBuYW1lIG9mIGRhdGFiYXNlIGxvZ2ZpbGUKICAg\
IHR5cGU6IHN0cmluZwogICAgZGVmYXVsdDogIi9kYXRhL21vbmdvZGIubG9nIgogICAgcmVxdWly\
ZWQ6IFRydWUKICAgIGRpc3BsYXlfZ3JvdXA6IE1vbmdvREIgQ2x1c3RlciBDb25maWd1cmF0aW9u\
CiAgLSBuYW1lOiBtb25nb2RiX3BvcnQgCiAgICB0aXRsZTogUG9ydCBmb3IgTW9uZ29EQiB0byBs\
aXN0ZW4gb24KICAgIHR5cGU6IHN0cmluZwogICAgZGVmYXVsdDogIjI3MDAwIgogICAgcmVxdWly\
ZWQ6IFRydWUKICAgIGRpc3BsYXlfZ3JvdXA6IE1vbmdvREIgQ2x1c3RlciBDb25maWd1cmF0aW9u\
CiAgLSBuYW1lOiBkaXNrX3NpemVfZ2IKICAgIHRpdGxlOiBTaXplIGluIEdiIGZvciBwZXJzaXN0\
ZW50IHN0b3JhZ2UgY2xhaW0gb24gZGF0YSBub2RlCiAgICBkZWZhdWx0OiAiNSIKICAgIHR5cGU6\
IHN0cmluZwogICAgZGlzcGxheV9ncm91cDogTW9uZ29EQiBDbHVzdGVyIENvbmZpZ3VyYXRpb24K\
ICAtIG5hbWU6IG51bWJlcl9wb2RzX3JzCiAgICB0aXRsZTogTnVtYmVyIG9mIG5vZGVzIGluIFJl\
cGxpY2EgU2V0CiAgICB0eXBlOiBzdHJpbmcgCiAgICBkZWZhdWx0OiAiMyIKICAgIHJlcXVpcmVk\
OiBUcnVlCiAgICBkaXNwbGF5X2dyb3VwOiBNb25nb0RCIFJlcGxpY2EgU2V0IENvbmZpZ3VyYXRp\
b24KCgoKdmVyc2lvbjogMC4xCm5hbWU6IG1vbmdvZGItZW50ZXJwcmlzZQpkZXNjcmlwdGlvbjog\
RGVwbG95IE1vbmdvREIgaW50byBPcGVuc2hpZnQgdGhyb3VnaCBPcHMgTWFuYWdlcgpiaW5kYWJs\
ZTogVHJ1ZQphc3luYzogb3B0aW9uYWwKbWV0YWRhdGE6CiAgZGlzcGxheU5hbWU6IE1vbmdvREIg\
RW50ZXJwcmlzZQogIGRlcGVuZGVuY2llczogWyAnY2VudG9zJyBdCiAgaW1hZ2VVcmw6IGh0dHBz\
Oi8vd3d3Lm1vbmdvZGIuY29tL2Fzc2V0cy9pbWFnZXMvY2xvdWQvYXRsYXMvaWxsdXN0cmF0aW9u\
cy9saXZlLWltcG9ydC5wbmcKICBkb2N1bWVudGF0aW9uVXJsOiBodHRwczovL2dpdGh1Yi5jb20v\
amFzb25taW1pY2svbW9uZ29kYi1vcGVuc2hpZnQtZGV2LXByZXZpZXcKcGxhbnM6CiAgLSBuYW1l\
OiByZXBsaWNhc2V0CiAgICBkZXNjcmlwdGlvbjogVGhpcyBwbGFuIGRlcGxveXMgYSBNb25nb0RC\
IHJlcGxpY2Egc2V0CiAgICBmcmVlOiBUcnVlCiAgICBtZXRhZGF0YTogCiAgICAgZGlzcGxheU5h\
bWU6IE1vbmdvREIgUmVwbGljYSBTZXQKICAgICBsb25nRGVzY3JpcHRpb246IFRoaXMgcGxhbiBk\
ZXBsb3lzIGEgTW9uZ29EQiByZXBsaWNhCiAgICAgY29zdDogJDAuMDAKICAgIHBhcmFtZXRlcnM6\
ICpyZXBsaWNhc2V0CiAgLSBuYW1lOiBhZ2VudC1vbmx5CiAgICBkZXNjcmlwdGlvbjogRGVwbG95\
cyBuLXBvZHMgd2l0aCBvbmx5IHRoZSBhZ2VudHMKICAgIGZyZWU6IFRydWUKICAgIG1ldGFkYXRh\
OgogICAgICBkZXNjcmlwdGlvbjogTW9uZ29EQiBBZ2VudHMtT25seQogICAgICBsb25nRGVzY3Jp\
cHRpb246IFRoaXMgcGxhbiBkZXBsb3lzIHNvbWUgbnVtYmVyIG9mIHBvZHMgZWFjaCB3aXRoIG9u\
bHkgMSBvZiBlYWNoIHR5cGUgb2YgTW9uZ29EQiBPcHMgTWFuYWdlciBhZ2VudC4gTm8gYWN0dWFs\
IE1vbmdvREIgaW5zdGFuY2VzIGFyZSBwcm92aXNpb25lZC4gRWFjaCBhZ2VudCBpcyBhc3NvY2lh\
dGVkIHdpdGggdGhlIGRlc2lyZWQgcHJvamVjdC4gVGhpcyBiYXNlIHBvZCBhbGxvd3MgdXNlcnMg\
dG8gY29uZmlndXJlIG1vcmUgYWR2YW5jZWQgY2x1c3RlcnMgZGlyZWN0bHkgdGhyb3VnaCBNb25n\
b0RCIE9wcyBNYW5hZ2VyLgogICAgICBjb3N0OiAkMSwwMDAsMDAwVVMKICAgIHBhcmFtZXRlcnM6\
ICphZ2VudHNvbmx5Cgo="






























COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
COPY library /opt/ansible/library
RUN chmod -R g=u /opt/{ansible,apb}
ENV ANSIBLE_LIBRARY /opt/ansible/library
ENV ANSIBLE_ROLES_PATH /opt/ansible/roles:/etc/ansible/roles
USER apb
